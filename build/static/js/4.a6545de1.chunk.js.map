{"version":3,"sources":["pages/kuaishou/kuaishou.tsx","components/pubInput/pubInput.tsx","webpack:///./src/components/pubInput/pubInput.scss?786c","components/pubInput/pubInput.scss","utils/analyze.ts"],"names":["Kuaishou","_super","props","_this","call","this","state","alertInfo","analyzeSuccess","__WEBPACK_IMPORTED_MODULE_0_tslib__","prototype","analyze","Val","dispatch","judge","judgeSwitch","Object","__WEBPACK_IMPORTED_MODULE_4__utils_analyze__","that","query","render","__WEBPACK_IMPORTED_MODULE_1_react__","className","__WEBPACK_IMPORTED_MODULE_3__components_pubInput_pubInput__","ownAnalyze","bind","width","height","controls","src","kuaishou","_kuaishouAnalyze","type","href","download","target","__webpack_exports__","__WEBPACK_IMPORTED_MODULE_2_dva__","_a","app","PubInput","ref","input","placeholder","onClick","resultVal","value","_alertEmptySwitch","content","__webpack_require__","module","i","options","hmr","transform","locals","exports","undefined","push","req","payload","alertEmptySwitch","exec","test","setState","link","getKey","sent","errString","err_1","toString","resultErr","split"],"mappings":"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","file":"static/js/4.a6545de1.chunk.js","sourcesContent":["/*\r\n* 抖音页面\r\n* */\r\nimport * as React from \"react\";\r\nimport {Component} from \"react\";\r\nimport {connect} from \"dva\";\r\nimport PubInput from \"./../../components/pubInput/pubInput\"\r\nimport Analyze from \"./../../utils/analyze\"\r\n\r\ntype PageOwnProps = {\r\n    dispatch: any,\r\n    kuaishou: any,\r\n    app: any\r\n}\r\n\r\ntype PageState = {\r\n    alertInfo: string,\r\n    analyzeSuccess: boolean\r\n}\r\n\r\n\r\nclass Kuaishou extends Component <PageOwnProps, PageState> {\r\n    constructor(props: any) {\r\n        super(props);\r\n        this.state = {\r\n            alertInfo: \"请先将视频链接粘贴到上面的输入框\",//提示信息\r\n            analyzeSuccess: false,//解析成功显示下载和预览的开关\r\n        }\r\n    }\r\n\r\n    //进行解析\r\n    private async analyze(Val: any) {\r\n        let {dispatch} = this.props;\r\n        //正则换成链接0\r\n        let judge = /(http:\\/\\/yaan.m.chenzhongtech.com\\/s\\/[A-Za-z0-9--]+)|(http:\\/\\/www.gifshow.com\\/s\\/[A-Za-z0-9--]+)/;\r\n        //正则进行判断格式\r\n        let judgeSwitch =\r\n            /([\\s\\u4E00-\\u9FA5a-zA-z0-9#@!$%^&*()_\\-+/_,.\"~`·！@#￥%……&*（）《》><？，。/]*http:\\/\\/yaan.m.chenzhongtech.com\\/s\\/[A-Za-z0-9]+[\\u4E00-\\u9FA5a-zA-z0-9#@!$%^&*()_+/_,.\"~`·！@#￥%……&*（）《》？，。/]*)|(http:\\/\\/www.gifshow.com\\/s\\/[A-Za-z0-9--]+)/;\r\n        Analyze({dispatch, Val,judge,judgeSwitch, that:this,query:\"kuaishou/queryKuaishou\"});\r\n    }\r\n\r\n\r\n    public render() {\r\n        return (\r\n            <div>\r\n                <div className={\"dy-warp\"}>\r\n                    <PubInput alertInfo={this.state.alertInfo}\r\n                              ownAnalyze={this.analyze.bind(this)}>\r\n                    </PubInput>\r\n                    {/*当解析成功的时候显示*/}\r\n                    {this.state.analyzeSuccess}\r\n                    {this.state.analyzeSuccess ?\r\n                        <div className={'video-content'}>\r\n                            <video width=\"320\" height=\"240\" controls>\r\n                                <source\r\n                                    src={this.props.kuaishou._kuaishouAnalyze}\r\n                                    type=\"video/mp4\">\r\n                                </source>\r\n                                <source src={this.props.kuaishou._kuaishouAnalyze} type=\"video/ogg\">\r\n                                </source>\r\n                                您的浏览器不支持 video 标签。\r\n                            </video>\r\n                            <a className=\"down-btn\"\r\n                               href={this.props.kuaishou._kuaishouAnalyze}\r\n                               download={this.props.kuaishou._kuaishouAnalyze} target=\"block\">点击下载</a>\r\n                        </div> :\r\n                        null}\r\n                </div>\r\n\r\n            </div>\r\n        )\r\n    }\r\n}\r\n\r\nexport default connect(({app, kuaishou}: any) => ({\r\n    app, kuaishou\r\n}))(Kuaishou);\r\n\n\n\n// WEBPACK FOOTER //\n// ./src/pages/kuaishou/kuaishou.tsx","/**\r\n * 公共输入框\r\n * */\r\nimport * as React from \"react\";\r\nimport {Component} from \"react\";\r\nimport {connect} from \"dva\";\r\nimport \"./pubInput.scss\"\r\n\r\ntype PageOwnProps = {\r\n    app:any,\r\n    alertInfo:string,//提示信息\r\n    ownAnalyze:() =>void,//解析的方法\r\n}\r\n\r\ntype PageState = {}\r\n\r\n\r\nclass PubInput extends Component <PageOwnProps, PageState> {\r\n    private input: HTMLInputElement | null;\r\n    public render() {\r\n        return (\r\n            <div className={\"pub-input-warp\"}>\r\n                <div className={\"pub-input clearfix\"}>\r\n                    <input className={\"float-left pub-input-item\"}\r\n                           type=\"text\"\r\n                           ref={input => this.input = input}\r\n                           placeholder={\"请将APP里复制的视频链接粘贴到这里\"}\r\n                    />\r\n                    <button className={\"float-left\"} onClick={() =>{\r\n                        // @ts-ignore\r\n                        let resultVal:any = this.input.value;\r\n                        // @ts-ignore\r\n                        return this.props.ownAnalyze(resultVal)\r\n                    }}>\r\n                        解析视频\r\n                    </button>\r\n                </div>\r\n                {this.props.app._alertEmptySwitch?<div className={\"pub-input-alert\"}>\r\n                    {this.props.alertInfo}\r\n                </div>:null}\r\n            </div>\r\n\r\n        )\r\n    }\r\n}\r\n\r\nexport default connect(({app}:any) =>({\r\n    app\r\n}))(PubInput);\n\n\n// WEBPACK FOOTER //\n// ./src/components/pubInput/pubInput.tsx","// style-loader: Adds some css to the DOM by adding a <style> tag\n\n// load the styles\nvar content = require(\"!!../../../node_modules/css-loader/index.js!../../../node_modules/sass-loader/lib/loader.js!./pubInput.scss\");\nif(typeof content === 'string') content = [[module.id, content, '']];\n// Prepare cssTransformation\nvar transform;\n\nvar options = {\"hmr\":true}\noptions.transform = transform\n// add the styles to the DOM\nvar update = require(\"!../../../node_modules/style-loader/lib/addStyles.js\")(content, options);\nif(content.locals) module.exports = content.locals;\n// Hot Module Replacement\nif(module.hot) {\n\t// When the styles change, update the <style> tags\n\tif(!content.locals) {\n\t\tmodule.hot.accept(\"!!../../../node_modules/css-loader/index.js!../../../node_modules/sass-loader/lib/loader.js!./pubInput.scss\", function() {\n\t\t\tvar newContent = require(\"!!../../../node_modules/css-loader/index.js!../../../node_modules/sass-loader/lib/loader.js!./pubInput.scss\");\n\t\t\tif(typeof newContent === 'string') newContent = [[module.id, newContent, '']];\n\t\t\tupdate(newContent);\n\t\t});\n\t}\n\t// When the module is disposed, remove the <style> tags\n\tmodule.hot.dispose(function() { update(); });\n}\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./src/components/pubInput/pubInput.scss\n// module id = 345\n// module chunks = 0 4 5","exports = module.exports = require(\"../../../node_modules/css-loader/lib/css-base.js\")(undefined);\n// imports\n\n\n// module\nexports.push([module.id, \".pub-input {\\n  margin-top: 30px;\\n  margin-bottom: 10px; }\\n  .pub-input input {\\n    padding: 10px 16px;\\n    font-size: 18px;\\n    line-height: 1.3333333;\\n    border-radius: 6px;\\n    border-top-right-radius: 0;\\n    border-bottom-right-radius: 0;\\n    color: #555;\\n    background-color: #fff;\\n    background-image: none;\\n    border: 1px solid #ccc;\\n    outline: none;\\n    width: calc(100% - 140px); }\\n  .pub-input button {\\n    width: 106px;\\n    height: 46px;\\n    padding: 10px 16px;\\n    font-size: 18px;\\n    line-height: 1.3333333;\\n    border-radius: 6px;\\n    color: #fff;\\n    background-color: #20a0ff;\\n    border-color: #20a0ff;\\n    border-top-left-radius: 0;\\n    border-bottom-left-radius: 0;\\n    user-select: none;\\n    background-image: none;\\n    border: 1px solid transparent;\\n    cursor: pointer; }\\n    .pub-input button:hover, .pub-input button:focus {\\n      color: #fff;\\n      background-color: #4db3ff;\\n      border-color: #4db3ff; }\\n\\n.pub-input-alert {\\n  color: #a94442;\\n  background-color: #f2dede;\\n  padding: 5px 15px;\\n  text-align: center;\\n  margin-bottom: 20px;\\n  border: 1px solid #ebccd1;\\n  border-radius: 4px; }\\n\", \"\"]);\n\n// exports\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./node_modules/css-loader!./node_modules/sass-loader/lib/loader.js!./src/components/pubInput/pubInput.scss\n// module id = 346\n// module chunks = 0 4 5","/*\r\n* 进行解析\r\n* **/\r\nexport default async function Analyze(req: any) {\r\n    let {dispatch, Val,that,judge,judgeSwitch,query} = req;\r\n    if (!Val) {\r\n        dispatch({\r\n            type: \"app/changeEmptySwitch\",\r\n            payload: {\r\n                alertEmptySwitch: true\r\n            }\r\n        });\r\n    } else {\r\n        //正则换成链接\r\n        let resultVal: any = judge.exec(Val);//转换之后的地址\r\n        //正则进行判断格式\r\n        if (!judgeSwitch.test(resultVal)) {\r\n            //视频格式不正确的时候\r\n            that.setState({\r\n                alertInfo: \"请输入正确的视频链接\"\r\n            });\r\n            dispatch({\r\n                type: \"app/changeEmptySwitch\",\r\n                payload: {\r\n                    alertEmptySwitch: true\r\n                }\r\n            });\r\n        } else {\r\n            //视频格式正确\r\n            try {\r\n                dispatch({\r\n                    type: \"app/changeEmptySwitch\",\r\n                    payload: {\r\n                        alertEmptySwitch: false\r\n                    }\r\n                });\r\n                await\r\n                    dispatch({\r\n                        type: query,\r\n                        payload: {\r\n                            link: resultVal[0],\r\n                            getKey: \"link\"\r\n                        }\r\n                    });\r\n                that.setState({\r\n                    analyzeSuccess: true\r\n                })\r\n            } catch (err) {\r\n                //显示接口错误信息\r\n                dispatch({\r\n                    type: \"app/changeEmptySwitch\",\r\n                    payload: {\r\n                        alertEmptySwitch: true\r\n                    }\r\n                });\r\n                that.setState({\r\n                    analyzeSuccess: false\r\n                });\r\n                let errString: string = err.toString();\r\n                let resultErr: string = \"\";\r\n                if (errString.split(\"Error: Error:\")) {\r\n                    resultErr = errString.split(\"Error: Error:\")[1];\r\n                    // @ts-ignore\r\n                    that.setState({\r\n                        alertInfo: resultErr\r\n                    });\r\n                } else {\r\n                    that.setState({\r\n                        alertInfo: err.toString(),\r\n                    });\r\n                }\r\n            }\r\n\r\n\r\n        }\r\n\r\n    }\r\n}\n\n\n// WEBPACK FOOTER //\n// ./src/utils/analyze.ts"],"sourceRoot":""}