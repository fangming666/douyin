{"version":3,"sources":["pages/douyin/douyin.tsx","utils/api.ts","components/pubInput/pubInput.tsx","webpack:///./src/components/pubInput/pubInput.scss?7303","components/pubInput/pubInput.scss","utils/analyze.ts","webpack:///./src/pages/douyin/douyin.scss?1229","pages/douyin/douyin.scss"],"names":["Douyin","_super","props","_this","call","this","state","alertInfo","analyzeSuccess","__WEBPACK_IMPORTED_MODULE_0_tslib__","prototype","analyze","Val","dispatch","judge","judgeSwitch","Object","__WEBPACK_IMPORTED_MODULE_5__utils_analyze__","that","query","render","__WEBPACK_IMPORTED_MODULE_1_react__","className","__WEBPACK_IMPORTED_MODULE_4__components_pubInput_pubInput__","ownAnalyze","bind","width","height","controls","src","douyin","_douyinAnalyze","type","href","__WEBPACK_IMPORTED_MODULE_6__utils_api__","encodeURIComponent","download","target","__webpack_exports__","__WEBPACK_IMPORTED_MODULE_2_dva__","_a","app","__webpack_require__","d","tokenApi","douyinApi","kuaishouApi","huoshanApi","downloadApi","baseUrl","PubInput","ref","input","placeholder","onClick","resultVal","value","_alertEmptySwitch","content","module","i","options","hmr","transform","locals","exports","undefined","push","req","payload","alertEmptySwitch","exec","test","setState","link","getKey","sent","errString","err_1","toString","resultErr","split"],"mappings":"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","file":"static/js/3.4a6be4dd.chunk.js","sourcesContent":["/*\n* 抖音页面\n* */\nimport * as React from \"react\";\nimport {Component} from \"react\";\nimport {connect} from \"dva\";\nimport './douyin.scss'\nimport PubInput from \"./../../components/pubInput/pubInput\"\nimport Analyze from \"./../../utils/analyze\"\n//@ts-ignore\nimport {downloadApi} from \"../../utils/api\"\nimport \"./douyin.scss\"\n\ntype PageOwnProps = {\n    dispatch: any,\n    douyin: any,\n    app: any\n}\n\ntype PageState = {\n    alertInfo: string,\n    analyzeSuccess: boolean\n}\n\n\nclass Douyin extends Component <PageOwnProps, PageState> {\n    constructor(props: any) {\n        super(props);\n        this.state = {\n            alertInfo: \"请先将视频链接粘贴到上面的输入框\",//提示信息\n            analyzeSuccess: false,//解析成功显示下载和预览的开关\n        }\n    }\n\n    //进行解析\n    private async analyze(Val: any) {\n        let {dispatch} = this.props;\n        //正则换成链接\n        let judge = /http:\\/\\/v.douyin.com\\/[A-Za-z0-9]+\\//;\n        //正则进行判断格式\n        let judgeSwitch =\n            /[\\s\\u4E00-\\u9FA5a-zA-z0-9#@!$%^&*()_+/_,.\"~`·！@#￥%……&*（）《》><？，。/]*http:\\/\\/v.douyin.com\\/[A-Za-z0-9]+\\/[\\u4E00-\\u9FA5a-zA-z0-9#@!$%^&*()_+/_,.\"~`·！@#￥%……&*（）《》？，。/]*/;\n        Analyze({dispatch, Val,judge,judgeSwitch, that:this,query:\"douyin/queryDouyin\"});\n    }\n\n\n    public render() {\n        return (\n            <div className={\"dy-warp\"}>\n                <PubInput alertInfo={this.state.alertInfo}\n                          ownAnalyze={this.analyze.bind(this)}>\n                </PubInput>\n                {/*当解析成功的时候显示*/}\n                {this.state.analyzeSuccess}\n                {this.state.analyzeSuccess ?\n                    <div className={'video-content'}>\n                        <video width=\"320\" height=\"240\" controls>\n                            <source\n                                src={this.props.douyin._douyinAnalyze}\n                                type=\"video/mp4\">\n                            </source>\n                            <source src={this.props.douyin._douyinAnalyze} type=\"video/ogg\">\n                            </source>\n                            您的浏览器不支持 video 标签。\n                        </video>\n                        <a className={\"down-btn\"}\n                           href={`${downloadApi}?url=${encodeURIComponent(this.props.douyin._douyinAnalyze)}`}\n                           download=\"视频.mp4\"\n                        target=\"_blank\">点击下载</a>\n                    </div> :\n                    null}\n            </div>\n        )\n    }\n}\n\nexport default connect(({app, douyin}: any) => ({\n    app, douyin\n}))(Douyin);\n\n\n\n// WEBPACK FOOTER //\n// ./src/pages/douyin/douyin.tsx","/**\n * api接口\n * */\nconst baseUrl: string = `/api/`;//base接口\nexport const tokenApi:string = `${baseUrl}settoken`;//token接口\nexport const douyinApi: string = `${baseUrl}douyin`;//抖音接口\nexport const kuaishouApi: string = `${baseUrl}kuaishou`;//快手接口\nexport const huoshanApi: string = `${baseUrl}huoshan`;//火山接口\nexport const downloadApi:string = `${baseUrl}download`;//下载接口\n\n\n// WEBPACK FOOTER //\n// ./src/utils/api.ts","/**\n * 公共输入框\n * */\nimport * as React from \"react\";\nimport {Component} from \"react\";\nimport {connect} from \"dva\";\nimport \"./pubInput.scss\"\n\ntype PageOwnProps = {\n    app:any,\n    alertInfo:string,//提示信息\n    ownAnalyze:() =>void,//解析的方法\n}\n\ntype PageState = {}\n\n\nclass PubInput extends Component <PageOwnProps, PageState> {\n    private input: HTMLInputElement | null;\n    public render() {\n        return (\n            <div className={\"pub-input-warp\"}>\n                <div className={\"pub-input clearfix\"}>\n                    <input className={\"float-left pub-input-item\"}\n                           type=\"text\"\n                           ref={input => this.input = input}\n                           placeholder={\"请将APP里复制的视频链接粘贴到这里\"}\n                    />\n                    <button className={\"float-left\"} onClick={() =>{\n                        // @ts-ignore\n                        let resultVal:any = this.input.value;\n                        // @ts-ignore\n                        return this.props.ownAnalyze(resultVal)\n                    }}>\n                        解析视频\n                    </button>\n                </div>\n                {this.props.app._alertEmptySwitch?<div className={\"pub-input-alert\"}>\n                    {this.props.alertInfo}\n                </div>:null}\n            </div>\n\n        )\n    }\n}\n\nexport default connect(({app}:any) =>({\n    app\n}))(PubInput);\n\n\n// WEBPACK FOOTER //\n// ./src/components/pubInput/pubInput.tsx","// style-loader: Adds some css to the DOM by adding a <style> tag\n\n// load the styles\nvar content = require(\"!!../../../node_modules/_css-loader@0.28.7@css-loader/index.js!../../../node_modules/_sass-loader@7.1.0@sass-loader/lib/loader.js!./pubInput.scss\");\nif(typeof content === 'string') content = [[module.id, content, '']];\n// Prepare cssTransformation\nvar transform;\n\nvar options = {\"hmr\":true}\noptions.transform = transform\n// add the styles to the DOM\nvar update = require(\"!../../../node_modules/_style-loader@0.19.0@style-loader/lib/addStyles.js\")(content, options);\nif(content.locals) module.exports = content.locals;\n// Hot Module Replacement\nif(module.hot) {\n\t// When the styles change, update the <style> tags\n\tif(!content.locals) {\n\t\tmodule.hot.accept(\"!!../../../node_modules/_css-loader@0.28.7@css-loader/index.js!../../../node_modules/_sass-loader@7.1.0@sass-loader/lib/loader.js!./pubInput.scss\", function() {\n\t\t\tvar newContent = require(\"!!../../../node_modules/_css-loader@0.28.7@css-loader/index.js!../../../node_modules/_sass-loader@7.1.0@sass-loader/lib/loader.js!./pubInput.scss\");\n\t\t\tif(typeof newContent === 'string') newContent = [[module.id, newContent, '']];\n\t\t\tupdate(newContent);\n\t\t});\n\t}\n\t// When the module is disposed, remove the <style> tags\n\tmodule.hot.dispose(function() { update(); });\n}\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./src/components/pubInput/pubInput.scss\n// module id = 345\n// module chunks = 3 4 5","exports = module.exports = require(\"../../../node_modules/_css-loader@0.28.7@css-loader/lib/css-base.js\")(undefined);\n// imports\n\n\n// module\nexports.push([module.id, \".pub-input {\\n  margin-top: 30px;\\n  margin-bottom: 10px; }\\n  .pub-input input {\\n    padding: 10px 16px;\\n    font-size: 18px;\\n    line-height: 1.3333333;\\n    border-radius: 6px;\\n    border-top-right-radius: 0;\\n    border-bottom-right-radius: 0;\\n    color: #555;\\n    background-color: #fff;\\n    background-image: none;\\n    border: 1px solid #ccc;\\n    outline: none;\\n    width: calc(100% - 140px); }\\n  .pub-input button {\\n    width: 106px;\\n    height: 46px;\\n    padding: 10px 16px;\\n    font-size: 18px;\\n    line-height: 1.3333333;\\n    border-radius: 6px;\\n    color: #fff;\\n    background-color: #20a0ff;\\n    border-color: #20a0ff;\\n    border-top-left-radius: 0;\\n    border-bottom-left-radius: 0;\\n    user-select: none;\\n    background-image: none;\\n    border: 1px solid transparent;\\n    cursor: pointer; }\\n    .pub-input button:hover, .pub-input button:focus {\\n      color: #fff;\\n      background-color: #4db3ff;\\n      border-color: #4db3ff; }\\n\\n.pub-input-alert {\\n  color: #a94442;\\n  background-color: #f2dede;\\n  padding: 5px 15px;\\n  text-align: center;\\n  margin-bottom: 20px;\\n  border: 1px solid #ebccd1;\\n  border-radius: 4px; }\\n\", \"\"]);\n\n// exports\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./node_modules/_css-loader@0.28.7@css-loader!./node_modules/_sass-loader@7.1.0@sass-loader/lib/loader.js!./src/components/pubInput/pubInput.scss\n// module id = 346\n// module chunks = 3 4 5","/*\n* 进行解析\n* **/\nexport default async function Analyze(req: any) {\n    let {dispatch, Val,that,judge,judgeSwitch,query} = req;\n    if (!Val) {\n        dispatch({\n            type: \"app/changeEmptySwitch\",\n            payload: {\n                alertEmptySwitch: true\n            }\n        });\n    } else {\n        //正则换成链接\n        let resultVal: any = judge.exec(Val);//转换之后的地址\n        //正则进行判断格式\n        if (!judgeSwitch.test(resultVal)) {\n            //视频格式不正确的时候\n            that.setState({\n                alertInfo: \"请输入正确的视频链接\"\n            });\n            dispatch({\n                type: \"app/changeEmptySwitch\",\n                payload: {\n                    alertEmptySwitch: true\n                }\n            });\n        } else {\n            //视频格式正确\n            try {\n                dispatch({\n                    type: \"app/changeEmptySwitch\",\n                    payload: {\n                        alertEmptySwitch: false\n                    }\n                });\n                await\n                    dispatch({\n                        type: query,\n                        payload: {\n                            link: resultVal[0],\n                            getKey: \"link\"\n                        }\n                    });\n                that.setState({\n                    analyzeSuccess: true\n                })\n            } catch (err) {\n                //显示接口错误信息\n                dispatch({\n                    type: \"app/changeEmptySwitch\",\n                    payload: {\n                        alertEmptySwitch: true\n                    }\n                });\n                that.setState({\n                    analyzeSuccess: false\n                });\n                let errString: string = err.toString();\n                let resultErr: string = \"\";\n                if (errString.split(\"Error: Error:\")) {\n                    resultErr = errString.split(\"Error: Error:\")[1];\n                    // @ts-ignore\n                    that.setState({\n                        alertInfo: resultErr\n                    });\n                } else {\n                    that.setState({\n                        alertInfo: err.toString(),\n                    });\n                }\n            }\n\n\n        }\n\n    }\n}\n\n\n// WEBPACK FOOTER //\n// ./src/utils/analyze.ts","// style-loader: Adds some css to the DOM by adding a <style> tag\n\n// load the styles\nvar content = require(\"!!../../../node_modules/_css-loader@0.28.7@css-loader/index.js!../../../node_modules/_sass-loader@7.1.0@sass-loader/lib/loader.js!./douyin.scss\");\nif(typeof content === 'string') content = [[module.id, content, '']];\n// Prepare cssTransformation\nvar transform;\n\nvar options = {\"hmr\":true}\noptions.transform = transform\n// add the styles to the DOM\nvar update = require(\"!../../../node_modules/_style-loader@0.19.0@style-loader/lib/addStyles.js\")(content, options);\nif(content.locals) module.exports = content.locals;\n// Hot Module Replacement\nif(module.hot) {\n\t// When the styles change, update the <style> tags\n\tif(!content.locals) {\n\t\tmodule.hot.accept(\"!!../../../node_modules/_css-loader@0.28.7@css-loader/index.js!../../../node_modules/_sass-loader@7.1.0@sass-loader/lib/loader.js!./douyin.scss\", function() {\n\t\t\tvar newContent = require(\"!!../../../node_modules/_css-loader@0.28.7@css-loader/index.js!../../../node_modules/_sass-loader@7.1.0@sass-loader/lib/loader.js!./douyin.scss\");\n\t\t\tif(typeof newContent === 'string') newContent = [[module.id, newContent, '']];\n\t\t\tupdate(newContent);\n\t\t});\n\t}\n\t// When the module is disposed, remove the <style> tags\n\tmodule.hot.dispose(function() { update(); });\n}\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./src/pages/douyin/douyin.scss\n// module id = 348\n// module chunks = 3","exports = module.exports = require(\"../../../node_modules/_css-loader@0.28.7@css-loader/lib/css-base.js\")(undefined);\n// imports\n\n\n// module\nexports.push([module.id, \"* {\\n  margin: 0;\\n  padding: 0; }\\n\\nbody {\\n  margin: 0;\\n  padding: 0;\\n  font-family: sans-serif;\\n  font-size: 14px; }\\n\\n.float-left {\\n  float: left !important; }\\n\\n.float-right {\\n  float: right !important; }\\n\\n.clearfix:after {\\n  content: \\\"\\\";\\n  display: block;\\n  clear: both; }\\n\\n.content {\\n  max-width: 960px;\\n  width: 85%;\\n  margin: 70px auto 0; }\\n\\n.question-title {\\n  font-size: 18px !important;\\n  line-height: 2.5 !important;\\n  margin-top: 50px;\\n  font-weight: bolder; }\\n\\n.common-questions li p {\\n  color: #666666 !important;\\n  line-height: 1.6;\\n  margin: 10px auto 20px !important;\\n  text-align: justify; }\\n\\n.prompt {\\n  white-space: nowrap; }\\n\\n.contact {\\n  font-size: 16px;\\n  line-height: 2; }\\n  .contact a {\\n    text-decoration: none; }\\n\\n.add-title {\\n  font-size: 18px;\\n  text-align: center; }\\n\\n@media screen and (max-height: 960px) {\\n  .clearfix a img {\\n    width: 30px !important;\\n    height: 30px !important;\\n    margin-top: 10px; }\\n  .clearfix a .float-left {\\n    font-size: 14px;\\n    padding-left: 5px; } }\\n\\n.video-content {\\n  display: flex;\\n  flex-direction: column;\\n  justify-content: center;\\n  align-items: center; }\\n  .video-content .down-btn {\\n    display: inline-block;\\n    width: 320px;\\n    padding: 10px 0;\\n    font-size: 16px;\\n    border-radius: 6px;\\n    color: #fff;\\n    background-color: #20a0ff;\\n    user-select: none;\\n    border: 1px solid #20a0ff;\\n    cursor: pointer;\\n    text-align: center;\\n    text-decoration: none;\\n    margin-top: 30px; }\\n  .video-content video {\\n    margin-top: 30px; }\\n\", \"\"]);\n\n// exports\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./node_modules/_css-loader@0.28.7@css-loader!./node_modules/_sass-loader@7.1.0@sass-loader/lib/loader.js!./src/pages/douyin/douyin.scss\n// module id = 350\n// module chunks = 3"],"sourceRoot":""}