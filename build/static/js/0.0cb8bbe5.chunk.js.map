{"version":3,"sources":["pages/douyin/douyin.tsx","utils/api.ts","components/pubInput/pubInput.tsx","webpack:///./src/components/pubInput/pubInput.scss?786c","components/pubInput/pubInput.scss","utils/analyze.ts","webpack:///./src/pages/douyin/douyin.scss?b66b","pages/douyin/douyin.scss"],"names":["Douyin","_super","props","_this","call","this","console","log","state","alertInfo","analyzeSuccess","__WEBPACK_IMPORTED_MODULE_0_tslib__","prototype","analyze","Val","dispatch","judge","judgeSwitch","Object","__WEBPACK_IMPORTED_MODULE_5__utils_analyze__","that","query","render","__WEBPACK_IMPORTED_MODULE_1_react__","className","__WEBPACK_IMPORTED_MODULE_4__components_pubInput_pubInput__","ownAnalyze","bind","width","height","controls","src","douyin","_douyinAnalyze","type","href","__WEBPACK_IMPORTED_MODULE_6__utils_api__","encodeURIComponent","download","__webpack_exports__","__WEBPACK_IMPORTED_MODULE_2_dva__","_a","app","__webpack_require__","d","tokenApi","douyinApi","kuaishouApi","huoshanApi","downloadApi","baseUrl","PubInput","ref","input","placeholder","onClick","resultVal","value","_alertEmptySwitch","content","module","i","options","hmr","transform","locals","exports","undefined","push","req","payload","alertEmptySwitch","exec","test","setState","link","getKey","sent","errString","err_1","toString","resultErr","split"],"mappings":"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","file":"static/js/0.0cb8bbe5.chunk.js","sourcesContent":["/*\r\n* 抖音页面\r\n* */\r\nimport * as React from \"react\";\r\nimport {Component} from \"react\";\r\nimport {connect} from \"dva\";\r\nimport './douyin.scss'\r\nimport PubInput from \"./../../components/pubInput/pubInput\"\r\nimport Analyze from \"./../../utils/analyze\"\r\n//@ts-ignore\r\nimport {downloadApi} from \"../../utils/api\"\r\nimport \"./douyin.scss\"\r\n\r\ntype PageOwnProps = {\r\n    dispatch: any,\r\n    douyin: any,\r\n    app: any\r\n}\r\n\r\ntype PageState = {\r\n    alertInfo: string,\r\n    analyzeSuccess: boolean\r\n}\r\n\r\n\r\nclass Douyin extends Component <PageOwnProps, PageState> {\r\n    constructor(props: any) {\r\n        super(props);\r\n        let text: string = \"https://www.iesdouyin.com/share/video/6617227169502334212/?region=CN&mid=6597075293465217805&u_code=15d18g0ca&titleType=title&utm_source=copy_link&utm_campaign=client_share&utm_medium=android&app=aweme&iid=56681399044&timestamp=1548078657\";\r\n        console.log(text);\r\n        this.state = {\r\n            alertInfo: \"请先将视频链接粘贴到上面的输入框\",//提示信息\r\n            analyzeSuccess: false,//解析成功显示下载和预览的开关\r\n        }\r\n    }\r\n\r\n    //进行解析\r\n    private async analyze(Val: any) {\r\n        let {dispatch} = this.props;\r\n        //正则换成链接\r\n        let judge = /(http:\\/\\/v.douyin.com\\/[A-Za-z0-9]+\\/)|(https:\\/\\/www\\.iesdouyin.com\\/share\\/video\\/[A-Za-z0-9_?=/&]+)/;\r\n        //正则进行判断格式\r\n        let judgeSwitch =\r\n            /([\\s\\u4E00-\\u9FA5a-zA-z0-9#@!$%^&*()_+/_,.\"~`·！@#￥%……&*（）《》><？，。/]*http:\\/\\/v.douyin.com\\/[A-Za-z0-9]+\\/[\\u4E00-\\u9FA5a-zA-z0-9#@!$%^&*()_+/_,.\"~`·！@#￥%……&*（）《》？，。/]*)|(https:\\/\\/www\\.iesdouyin.com\\/share\\/video\\/[A-Za-z0-9_?=/&]+)/;\r\n        Analyze({dispatch, Val, judge, judgeSwitch, that: this, query: \"douyin/queryDouyin\"});\r\n    }\r\n\r\n\r\n    public render() {\r\n        return (\r\n            <div className={\"dy-warp\"}>\r\n                <PubInput alertInfo={this.state.alertInfo}\r\n                          ownAnalyze={this.analyze.bind(this)}>\r\n                </PubInput>\r\n                {/*当解析成功的时候显示*/}\r\n                {this.state.analyzeSuccess}\r\n                {this.state.analyzeSuccess ?\r\n                    <div className={'video-content'}>\r\n                        <video width=\"320\" height=\"240\" controls>\r\n                            <source\r\n                                src={this.props.douyin._douyinAnalyze}\r\n                                type=\"video/mp4\">\r\n                            </source>\r\n                            <source src={this.props.douyin._douyinAnalyze} type=\"video/ogg\">\r\n                            </source>\r\n                            您的浏览器不支持 video 标签。\r\n                        </video>\r\n                        <a className={\"down-btn\"}\r\n                           href={`${downloadApi}?url=${encodeURIComponent(this.props.douyin._douyinAnalyze)}`}\r\n                           download=\"视频.mp4\"\r\n                        >点击下载</a>\r\n                    </div> :\r\n                    null}\r\n            </div>\r\n        )\r\n    }\r\n}\r\n\r\nexport default connect(({app, douyin}: any) => ({\r\n    app, douyin\r\n}))(Douyin);\r\n\n\n\n// WEBPACK FOOTER //\n// ./src/pages/douyin/douyin.tsx","/**\r\n * api接口\r\n * */\r\nconst baseUrl: string = `/api/`;//base接口\r\nexport const tokenApi:string = `${baseUrl}settoken`;//token接口\r\nexport const douyinApi: string = `${baseUrl}douyin`;//抖音接口\r\nexport const kuaishouApi: string = `${baseUrl}kuaishou`;//快手接口\r\nexport const huoshanApi: string = `${baseUrl}huoshan`;//火山接口\r\nexport const downloadApi:string = `${baseUrl}download`;//下载接口\n\n\n// WEBPACK FOOTER //\n// ./src/utils/api.ts","/**\r\n * 公共输入框\r\n * */\r\nimport * as React from \"react\";\r\nimport {Component} from \"react\";\r\nimport {connect} from \"dva\";\r\nimport \"./pubInput.scss\"\r\n\r\ntype PageOwnProps = {\r\n    app:any,\r\n    alertInfo:string,//提示信息\r\n    ownAnalyze:() =>void,//解析的方法\r\n}\r\n\r\ntype PageState = {}\r\n\r\n\r\nclass PubInput extends Component <PageOwnProps, PageState> {\r\n    private input: HTMLInputElement | null;\r\n    public render() {\r\n        return (\r\n            <div className={\"pub-input-warp\"}>\r\n                <div className={\"pub-input clearfix\"}>\r\n                    <input className={\"float-left pub-input-item\"}\r\n                           type=\"text\"\r\n                           ref={input => this.input = input}\r\n                           placeholder={\"请将APP里复制的视频链接粘贴到这里\"}\r\n                    />\r\n                    <button className={\"float-left\"} onClick={() =>{\r\n                        // @ts-ignore\r\n                        let resultVal:any = this.input.value;\r\n                        // @ts-ignore\r\n                        return this.props.ownAnalyze(resultVal)\r\n                    }}>\r\n                        解析视频\r\n                    </button>\r\n                </div>\r\n                {this.props.app._alertEmptySwitch?<div className={\"pub-input-alert\"}>\r\n                    {this.props.alertInfo}\r\n                </div>:null}\r\n            </div>\r\n\r\n        )\r\n    }\r\n}\r\n\r\nexport default connect(({app}:any) =>({\r\n    app\r\n}))(PubInput);\n\n\n// WEBPACK FOOTER //\n// ./src/components/pubInput/pubInput.tsx","// style-loader: Adds some css to the DOM by adding a <style> tag\n\n// load the styles\nvar content = require(\"!!../../../node_modules/css-loader/index.js!../../../node_modules/sass-loader/lib/loader.js!./pubInput.scss\");\nif(typeof content === 'string') content = [[module.id, content, '']];\n// Prepare cssTransformation\nvar transform;\n\nvar options = {\"hmr\":true}\noptions.transform = transform\n// add the styles to the DOM\nvar update = require(\"!../../../node_modules/style-loader/lib/addStyles.js\")(content, options);\nif(content.locals) module.exports = content.locals;\n// Hot Module Replacement\nif(module.hot) {\n\t// When the styles change, update the <style> tags\n\tif(!content.locals) {\n\t\tmodule.hot.accept(\"!!../../../node_modules/css-loader/index.js!../../../node_modules/sass-loader/lib/loader.js!./pubInput.scss\", function() {\n\t\t\tvar newContent = require(\"!!../../../node_modules/css-loader/index.js!../../../node_modules/sass-loader/lib/loader.js!./pubInput.scss\");\n\t\t\tif(typeof newContent === 'string') newContent = [[module.id, newContent, '']];\n\t\t\tupdate(newContent);\n\t\t});\n\t}\n\t// When the module is disposed, remove the <style> tags\n\tmodule.hot.dispose(function() { update(); });\n}\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./src/components/pubInput/pubInput.scss\n// module id = 342\n// module chunks = 0 4 5","exports = module.exports = require(\"../../../node_modules/css-loader/lib/css-base.js\")(undefined);\n// imports\n\n\n// module\nexports.push([module.id, \".pub-input {\\n  margin-top: 30px;\\n  margin-bottom: 10px; }\\n  .pub-input input {\\n    padding: 10px 16px;\\n    font-size: 18px;\\n    line-height: 1.3333333;\\n    border-radius: 6px;\\n    border-top-right-radius: 0;\\n    border-bottom-right-radius: 0;\\n    color: #555;\\n    background-color: #fff;\\n    background-image: none;\\n    border: 1px solid #ccc;\\n    outline: none;\\n    width: calc(100% - 140px); }\\n  .pub-input button {\\n    width: 106px;\\n    height: 46px;\\n    padding: 10px 16px;\\n    font-size: 18px;\\n    line-height: 1.3333333;\\n    border-radius: 6px;\\n    color: #fff;\\n    background-color: #20a0ff;\\n    border-color: #20a0ff;\\n    border-top-left-radius: 0;\\n    border-bottom-left-radius: 0;\\n    user-select: none;\\n    background-image: none;\\n    border: 1px solid transparent;\\n    cursor: pointer; }\\n    .pub-input button:hover, .pub-input button:focus {\\n      color: #fff;\\n      background-color: #4db3ff;\\n      border-color: #4db3ff; }\\n\\n.pub-input-alert {\\n  color: #a94442;\\n  background-color: #f2dede;\\n  padding: 5px 15px;\\n  text-align: center;\\n  margin-bottom: 20px;\\n  border: 1px solid #ebccd1;\\n  border-radius: 4px; }\\n\", \"\"]);\n\n// exports\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./node_modules/css-loader!./node_modules/sass-loader/lib/loader.js!./src/components/pubInput/pubInput.scss\n// module id = 343\n// module chunks = 0 4 5","/*\r\n* 进行解析\r\n* **/\r\nexport default async function Analyze(req: any) {\r\n    let {dispatch, Val,that,judge,judgeSwitch,query} = req;\r\n    if (!Val) {\r\n        dispatch({\r\n            type: \"app/changeEmptySwitch\",\r\n            payload: {\r\n                alertEmptySwitch: true\r\n            }\r\n        });\r\n    } else {\r\n        //正则换成链接\r\n        let resultVal: any = judge.exec(Val);//转换之后的地址\r\n        //正则进行判断格式\r\n        if (!judgeSwitch.test(resultVal)) {\r\n            //视频格式不正确的时候\r\n            that.setState({\r\n                alertInfo: \"请输入正确的视频链接\"\r\n            });\r\n            dispatch({\r\n                type: \"app/changeEmptySwitch\",\r\n                payload: {\r\n                    alertEmptySwitch: true\r\n                }\r\n            });\r\n        } else {\r\n            //视频格式正确\r\n            try {\r\n                dispatch({\r\n                    type: \"app/changeEmptySwitch\",\r\n                    payload: {\r\n                        alertEmptySwitch: false\r\n                    }\r\n                });\r\n                await\r\n                    dispatch({\r\n                        type: query,\r\n                        payload: {\r\n                            link: resultVal[0],\r\n                            getKey: \"link\"\r\n                        }\r\n                    });\r\n                that.setState({\r\n                    analyzeSuccess: true\r\n                })\r\n            } catch (err) {\r\n                //显示接口错误信息\r\n                dispatch({\r\n                    type: \"app/changeEmptySwitch\",\r\n                    payload: {\r\n                        alertEmptySwitch: true\r\n                    }\r\n                });\r\n                that.setState({\r\n                    analyzeSuccess: false\r\n                });\r\n                let errString: string = err.toString();\r\n                let resultErr: string = \"\";\r\n                if (errString.split(\"Error: Error:\")) {\r\n                    resultErr = errString.split(\"Error: Error:\")[1];\r\n                    // @ts-ignore\r\n                    that.setState({\r\n                        alertInfo: resultErr\r\n                    });\r\n                } else {\r\n                    that.setState({\r\n                        alertInfo: err.toString(),\r\n                    });\r\n                }\r\n            }\r\n\r\n\r\n        }\r\n\r\n    }\r\n}\n\n\n// WEBPACK FOOTER //\n// ./src/utils/analyze.ts","// style-loader: Adds some css to the DOM by adding a <style> tag\n\n// load the styles\nvar content = require(\"!!../../../node_modules/css-loader/index.js!../../../node_modules/sass-loader/lib/loader.js!./douyin.scss\");\nif(typeof content === 'string') content = [[module.id, content, '']];\n// Prepare cssTransformation\nvar transform;\n\nvar options = {\"hmr\":true}\noptions.transform = transform\n// add the styles to the DOM\nvar update = require(\"!../../../node_modules/style-loader/lib/addStyles.js\")(content, options);\nif(content.locals) module.exports = content.locals;\n// Hot Module Replacement\nif(module.hot) {\n\t// When the styles change, update the <style> tags\n\tif(!content.locals) {\n\t\tmodule.hot.accept(\"!!../../../node_modules/css-loader/index.js!../../../node_modules/sass-loader/lib/loader.js!./douyin.scss\", function() {\n\t\t\tvar newContent = require(\"!!../../../node_modules/css-loader/index.js!../../../node_modules/sass-loader/lib/loader.js!./douyin.scss\");\n\t\t\tif(typeof newContent === 'string') newContent = [[module.id, newContent, '']];\n\t\t\tupdate(newContent);\n\t\t});\n\t}\n\t// When the module is disposed, remove the <style> tags\n\tmodule.hot.dispose(function() { update(); });\n}\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./src/pages/douyin/douyin.scss\n// module id = 345\n// module chunks = 0","exports = module.exports = require(\"../../../node_modules/css-loader/lib/css-base.js\")(undefined);\n// imports\n\n\n// module\nexports.push([module.id, \"* {\\n  margin: 0;\\n  padding: 0; }\\n\\nbody {\\n  margin: 0;\\n  padding: 0;\\n  font-family: sans-serif;\\n  font-size: 14px; }\\n\\n.float-left {\\n  float: left !important; }\\n\\n.float-right {\\n  float: right !important; }\\n\\n.clearfix:after {\\n  content: \\\"\\\";\\n  display: block;\\n  clear: both; }\\n\\n.content {\\n  max-width: 960px;\\n  width: 85%;\\n  margin: 70px auto 0; }\\n\\n.question-title {\\n  font-size: 18px !important;\\n  line-height: 2.5 !important;\\n  margin-top: 50px;\\n  font-weight: bolder; }\\n\\n.common-questions li p {\\n  color: #666666 !important;\\n  line-height: 1.6;\\n  margin: 10px auto 20px !important;\\n  text-align: justify; }\\n\\n.prompt {\\n  white-space: nowrap; }\\n\\n.contact {\\n  font-size: 16px;\\n  line-height: 2; }\\n  .contact a {\\n    text-decoration: none; }\\n\\n.add-title {\\n  font-size: 18px;\\n  text-align: center; }\\n\\n@media screen and (max-height: 960px) {\\n  .clearfix a img {\\n    width: 30px !important;\\n    height: 30px !important;\\n    margin-top: 10px; }\\n  .clearfix a .float-left {\\n    font-size: 14px;\\n    padding-left: 5px; } }\\n\\n.video-content {\\n  display: flex;\\n  flex-direction: column;\\n  justify-content: center;\\n  align-items: center; }\\n  .video-content .down-btn {\\n    display: inline-block;\\n    width: 320px;\\n    padding: 10px 0;\\n    font-size: 16px;\\n    border-radius: 6px;\\n    color: #fff;\\n    background-color: #20a0ff;\\n    user-select: none;\\n    border: 1px solid #20a0ff;\\n    cursor: pointer;\\n    text-align: center;\\n    text-decoration: none;\\n    margin-top: 30px; }\\n  .video-content video {\\n    margin-top: 30px; }\\n\", \"\"]);\n\n// exports\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./node_modules/css-loader!./node_modules/sass-loader/lib/loader.js!./src/pages/douyin/douyin.scss\n// module id = 347\n// module chunks = 0"],"sourceRoot":""}